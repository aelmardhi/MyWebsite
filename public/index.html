<html>
    <head>
        <meta charset="utf-8">
        <script src="../axios.min.js"></script>
        <title>Home</title>
    </head >
    <style>
        *, *:after, *:before{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body{
            width: 100vw;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
        }
         article{
             border-radius: 1em;
             overflow: hidden;
             text-align: center;
             box-shadow: 2px 2px 20px #00f1,
                 5px 5px 30px #00f2
        }
        .title{
            color: white;
            padding: 23px;
            font-size: 3rem;
            font-weight: bolder;
            background: #39f
        }
        .data{
             background: #e1ecfc;
             padding: 20px 0;
        }
        ul{
            
        }
        ul li{
            list-style: none;
        }
        li + li {
            border-top: 1px solid #39f9;
        }
        ul li a{
            color: #06e;
            display: block;
/*
            display: flex;
            align-items: center;
            justify-content: space-around;
*/
            font-size: 2rem;
            font-weight: bold;
            padding: 20px 30px;
            width: 100%;
/*            height: 100%;*/
            text-decoration: none;
            transition: all .3s ease;
        }
        ul li a:hover{
            background: #3af;
            color: white;
            font-size: 3rem;
        }
        ul li a:active{
            background: #3ff;
            color: white;
            font-size: 2rem;
        }
        .downloads{
            display: none;
        }
        .showDownloads{
            display: block;
        }
        span {
            margin: 10px;
        }
        span + span{
            border-left: 1px solid #09f9;
        }
        @media(max-width:600px){
            ul li a{
                padding: 2px 15px;
            }
            ul li a:active{
            font-size: 1rem;
        }
            ul li a:hover{
            font-size: .8rem;
        }
            .title{
                font-size: 1.3rem;
            }
            
        span {
            margin: 3px;
        }
        }
    </style>
    <body>
        <article class="main">
            <div class="title">Main Routes</div>
            <div class="data">
                <ul>
                    <li><a href="download.html">Http Downloader</a></li>
                    <li><a href="ytdl/">Youtube Downloader</a></li>
                    <li><a href="chato_1.0.0.apk">chato apk</a></li>
                </ul>
            </div>
        </article>
        <article class="downloads" id="downloads">
            <div class="title">Downloads</div>
            <div class="data">
                <ul id="downloads-list"></ul>
            </div>
        </article>
    </body>
    <script>
        const host = 'https://dardasha.herokuapp.com';
        document.addEventListener('DOMContentLoaded',function(){
            const list = document.getElementById('downloads-list');
            const downloads = document.getElementById('downloads');
            axios.get(host+'/api/download/files').then(res => {
                    downloads.classList.add('showDownloads');
                    
                    list.innerHTML = res.data.map(i =>{ 
                        let t = i.modified;
                        let s = (i.size > 1024)?((i.size > 1024 * 1024)? (i.size / 1024 /1024).toFixed(2) + 'MB' : (i.size / 1024).toFixed(2) + 'KB') : i.size + 'B'   ;
                        
                        return'<li><a href="./downloads/'+i.name+'"><span>'+i.name+'</span><span>'+t+'</span><span>'+s+'</span></a></li>'}).join('');
                 }).catch(err => console.log('axios'+err+err.data));

        })
    </script>
</html>