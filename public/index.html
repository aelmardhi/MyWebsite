<html>
    <head>
        <meta charset="utf-8">
        <title>Home</title>
    </head >
    <style>
        *, *:after, *:before{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body{
            width: 100vw;
            height: 100%;
            justify-content: space-around;
        }
         article{
             margin: 8em auto;
             border-radius: 1em;
             overflow: hidden;
             text-align: center;
             max-width: 800px;
             box-shadow: 2px 2px 10px #0003,
                 15px 15px 30px  #39f5;
            border: 2px solid #39f9;
        }
        h2{
            text-align: center;
            color: #09f9;
            font-family: monospace;
        }
        .title{
            color: white;
            padding: 23px;
            font-size: 3rem;
            font-weight: bolder;
            background: #39f
        }
        .data{
            width: 100%;
             background: #e1ecfc;
             padding: 20px auto;
            
        }
        ul{
            
        }
        ul li{
            list-style: none;
        }
        li + li {
            border-top: 1px solid #39f9;
        }
        ul li a{
            color: #06e;
            display: block;
           font-size: 1.25rem;
            font-weight: bold;
            padding: 20px 30px;
            width: 100%;
            font-family: sans-serif;
            letter-spacing: 1px;
            text-decoration: none;
            transition: all .3s ease;
        }
        .downloads ul li a{
             display: grid;
            grid-template-columns: 3fr 1fr 1fr;
            
        }
        ul li a:hover{
            background: #3af;
            color: white;
            font-size: 2rem;
        }
        ul li a:active{
            background: #3ff;
            color: white;
            font-size: 1.25rem;
        }
        .downloads{
            display: none;
        }
        .showDownloads{
            display: block;
        }
        span {
            padding: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        span + span{
            border-left: 1px solid #09f9;
        }
        .downloads ul li a{
                font-size: 1.2rem;
            }
        .downloads ul li a:hover{
                font-size: 1.5rem;
            }
        @media(min-width:600px){
            ul li a{
                padding: 20px 15px;
                font-size: 3rem;
            }
            ul li a:active{
            font-size: 3rem;
        }
            ul li a:hover{
            font-size: 4rem;
        }
        .downloads ul li a{
                font-size: 1.1rem;
            }
            .title{
                font-size: 5rem;
            }
            
        span {
            margin: 3px;
        }
            h2{
                font-size: 2rem;
            }
            article{
                margin: 4em auto;
            }
        }
    </style>
    <body>
        <article class="main">
            <div class="title">Main Routes</div>
            <div class="data">
                <ul>
                    <li><a href="download.html">Http Downloader</a></li>
                    <li><a href="upload.html">File Uploader</a></li>
                    <li><a href="ytdl/">Youtube Downloader</a></li>
                    <li><a href="chato_1.0.0.apk">chato apk</a></li>
                </ul>
            </div>
        </article>
        <article class="downloads" id="downloads">
            <div class="title">Downloads</div>
            <div class="data">
                <ul id="downloads-list"></ul>
            </div>
        </article>
        <h2>aelmardhi Â© 2020</h2>
    </body>
    <script>
        const host = 'https://dardasha.herokuapp.com';
        document.addEventListener('DOMContentLoaded',function(){
            const list = document.getElementById('downloads-list');
            const downloads = document.getElementById('downloads');
            fetch(host+'/api/download/files').then(r => r.json()).then(res => {
                    downloads.classList.add('showDownloads');
                    
                    list.innerHTML = res.map(i =>{ 
                        let t = i.modified;
                        let s = (i.size > 1024)?((i.size > 1024 * 1024)? (i.size / 1024 /1024).toFixed(2) + ' MB' : (i.size / 1024).toFixed(2) + ' KB') : i.size + ' B'   ;
                        
                        return'<li><a href="./downloads/'+i.name+'"><span>'+i.name+'</span><span>'+t+'</span><span>'+s+'</span></a></li>'}).join('');
                 }).catch(err => console.log('fetch'+err+err.data));

        })
    </script>
</html>