<!DOCTYPE html>
<html lang="en">
    <head>
	<link rel="manifest" href="/manifest.json">
	<meta name="theme-color" content="#39f"/>
	<link rel="icon" href="favicon.png" type="favicon.ico" />  
	<link rel="apple-touch-icon" href="icons/icon152.png">    
	<meta name="apple-mobile-web-app-capable" content="yes">  
	<meta name="apple-mobile-web-app-status-bar-style" content="#39f"> 
	<meta name="apple-mobile-web-app-title" content="Dardasha"> 
	<meta name="msapplication-TileImage" content="icons/icon144.png">  
	<meta name="msapplication-TileColor" content="#39f">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<meta name="description" content="This is aelmardhi's personal site, it is used to run small projects">
        <title>Home</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-V95FG9MK9N"></script>
        
    </head >
    <style>
        :root{
            --clr-primary:#e1ecfc;
            --clr-secondary: #39f;
            --clr-accent1: #06e;
            --clr-accent2: #5af;
            --clr-accent3: #06e;
            --clr-accent4: #3af;
            --clr-light: #fff;
            --clr-body : #fff;
            --clr-main: none;
            --border1 :  2px solid #39f9;
            --bs-main: none;
            --bs-article: 2px 2px 10px #0003, 10px 10px 20px  #39f5;
            --bs-downloads: inset 0 0 8px #0003 , inset 0 0 15px #0001;
            --bs-downloads-hover: 0 0 6px #0005, 0 0 12px #0003;
            --bs-games:inset 0 0 8px #0005 , inset 0 0 15px #0003;
        }
        @media(prefers-color-scheme: dark){ 
            :root{   
            --clr-primary:#232834;
            --clr-secondary: #126;
            --clr-accent1: #025;
            --clr-accent2: #128;
            --clr-accent3: #58f;
            --clr-accent4: #126;
            --clr-light: #fff;
            --clr-body : #161009;
            --clr-main: #191629;
            --border1 :  none;
            --bs-main: inset 0 0 15px #5693, 0 0 10px #5696;
            --bs-article: none;
            --bs-downloads: inset 0 0 8px #0003 , inset 0 0 15px #0001;
            --bs-downloads-hover: 0 0 6px #0005, 0 0 12px #0003;
            --bs-games:inset 0 0 8px #0005 , inset 0 0 15px #0003;
            }
        }
        *, *:after, *:before{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body{
            width: 100vw;
            height: 100%;
            justify-content: space-around;
            display: flex;
            flex-direction: column;
            background-color: var(--clr-body);
        }
        main{
            display: flex;
            flex-direction: row;
            width: 80%;
            max-width: 1200px;
            margin: 1em auto 0 auto;
            position: relative;
            box-shadow: var(--bs-main);
            border-radius: 1em 1em 1em 0;
            background-color: var(--clr-main);
        }
        .main{
            border-left: none;
            border-top-left-radius:0 ;
            border-bottom-left-radius: 0;
            width: 200px;
            height: max-content;
        }
         article{
             width: 80%;
             margin: 0 auto;
             border-radius: 1em;
             overflow: hidden;
             text-align: center;
             box-shadow: var(--bs-article);
            border: var(--border1);
        }
        h2{
            text-align: center;
            color: #09f9;
            font-family: monospace;
        }
        .title{
            color: var(--clr-light);
            padding: 15px;
            font-size: 1.8rem;
            font-weight: bolder;
            background: var(--clr-secondary);
        }
        .data{
            width: 100%;
             background: var(--clr-primary);
             padding: 20px auto;
            
        }
        ul li{
            list-style: none;
        }
        li + li {
            border-top: 1px solid #39f9;
        }
        ul li a,
        .games h3{
            color: var(--clr-accent3);
            display: block;
           font-size: 1rem;
            font-weight: bold;
            padding: 10px 15px;
            width: 100%;
            font-family: sans-serif;
            letter-spacing: 1px;
            text-decoration: none;
            transition: all .3s ease;
        }
        ul li a:hover{
            background: #3af;
            color: var(--clr-light);
        }
        ul li a:active,
        ul li h3:active{
            background: #3ff;
            color: var(--clr-light);
        }
        .downloads{
            height: 100%;
            border-bottom-right-radius: 0;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            width: 100%;
        }
        progress{
            width: 100%;
        }
        .downloads .title{
            background: linear-gradient(90deg,var(--clr-accent1) 20%, var(--clr-accent2) 70%, var(--clr-secondary) 100%);
        }
        span {
            margin: 0;
            overflow: hidden;
            /* text-overflow: ellipsis; */
        }
        .downloads ul{
            overflow-y: scroll;
            max-height: 80vh;
            height: 100%;
            padding: 15px;
            background: var(--clr-accent1);
            box-shadow: var(--bs-downloads);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px ,1fr));
        }
        .downloads ul li {
            position: relative;
            margin: 5px;
            
        }
        .downloads ul li a{
            display: flex;
            flex-direction: column;
                font-size: .8rem;
            padding: 0;
            background-color: var(--clr-light);
        }
        .downloads ul li a:hover{
            box-shadow: var(--bs-downloads-hover);
        }
        .downloads ul li a span{
            background: linear-gradient(45deg ,var(--clr-accent1) 50%, var(--clr-light) 70%);
            color: var(--clr-light);
            padding-left: 10px;;
            text-align: left;
        }
        
        .downloads ul li a:hover span{
            background: linear-gradient(45deg ,#3af 50%, var(--clr-light) 70%);
        }
        .downloads ul li .download_link{
            position: absolute;
            border: none;
            font-size: 1em;
            bottom: 5px;
            right: 1px;
            color: var(--clr-secondary);
            width: max-content;
            padding:  5px .5em;
            background-color: var(--clr-light);
        }
        .downloads ul li .download_link:hover{
            background-color: var(--clr-secondary);
            color: var(--clr-light);
        }
        .downloads ul li a span:nth-child(1){
            color: var(--clr-accent1);
            background: var(--clr-light);
                height: 50px;
                font-size: 1.6rem;
                display: flex;
                align-items: center;
                justify-content: start;
                font-weight: normal;
            }
        .downloads ul li a:hover span:nth-child(1){
            background-color: #3af;
            color: var(--clr-light);
        }
        .games{
            max-width: 1200px;
            border-top-left-radius: 0;
            display: flex;
            flex-direction: row;
        }
        
        .games h3{
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 200px;
            background: linear-gradient(90deg,var(--clr-accent1) 20%, var(--clr-accent4) 100%);
            color: var(--clr-light);
            font-size: 1.8rem;
            font-weight: 900;
        }
        .games_list{
            width: 100%;
            box-shadow: var(--bs-games);
            display: flex;
            flex-direction: row;
            overflow-y: hidden;
            overflow-x: scroll;
        }
        .games_list li{
            display: flex;
            align-items: stretch;
            justify-content: center;
        }
        .games_list li a{
            display: flex;
            align-items: center;
        }
        body > h2{
            margin: 1rem;
        }
        
        @media(max-width:600px){
            article, main{
                width: 100%;
            }
            main{
                margin: 0em;
            }

            .title{
                font-size: 1rem;
            }
            .games h3{
                font-size: 1rem;
                width: 100px;
            }
            ul li a{
                font-size: .75rem;
            }
            .downloads{
                border-radius: 0;
            }
            .downloads ul{
                padding: 5px;
                grid-template-columns: repeat(auto-fit, minmax(200px ,1fr));

            }
            .downloads ul li .download_link{
                font-size: .6rem;
                padding: 5px 5px;
            }
            .downloads ul li a span{
                font-size: .7rem;
            }
            .downloads ul li a span:nth-child(1){
                font-size: .8rem;
            }
            .main{
                border-top-right-radius: 0;
            }
        }
        
    </style>
    <body>
        <main>
        <article class="downloads" id="downloads">
            <div class="title">Downloads</div>
            <div class="data">
                <ul id="downloads-list"><progress></progress></ul>
            </div>
        </article>
        <article class="main">
            <div class="title">Main Routes</div>
            <div class="data">
                <ul>
                    <li><a href="download.html">Http Downloader</a></li>
                    <li><a href="upload.html">File Uploader</a></li>
                    <li><a href="ytdl/">Youtube Downloader</a></li>
                    <li><a href="dithering/">Dithering Demo</a></li>
                    <li><a href="filter/">Filter Demo</a></li>
                    <li><a href="jpeg/">JPEG</a></li>
                    <li><a href="screenRecorder/">Screen Recorder</a></li>
                    <li><a href="api/rtc/">videoChat</a></li>
                    <li><a href="chato_1.0.0.apk">chato apk</a></li>
                    </ul>
            </div>
        </article>
        </main>
        <article class="games">
            <h3>Games</h3>
            <ul class="games_list data">
                <li><a href="games/brick-breaker/">Brick Breaker</a></li>
                <li><a href="games/candy_crush/">Candy Crush</a></li>
                <li><a href="games/connect_four/">Connect Four</a></li>
                <li><a href="games/frogger/">Frogger</a></li>
                <li><a href="games/globe/">Globe</a></li>
                <li><a href="games/memory_game/">Memory Game</a></li>
                <li><a href="games/snake/">Snake</a></li>
                <li><a href="games/space-invader/">Space Invader</a></li>
                <li><a href="games/stack/">Stack</a></li>
                <li><a href="games/tetris/">Tetris</a></li>
                <li><a href="games/whack-a-mole/">Whack a Mole</a></li>
            </ul>
        </article>
        
        <h2>aelmardhi Â© 2021</h2>
    </body>
    <script>
        const host = 'https://dardasha.herokuapp.com';
        document.addEventListener('DOMContentLoaded',function(){
            const list = document.getElementById('downloads-list');
            const downloads = document.getElementById('downloads');
            fetch(host+'/api/download/files').then(r => r.json()).then(res => {
                    downloads.classList.add('showDownloads');
                    
                    list.innerHTML = res.map(i =>{ 
                        let t = i.modified;
                        let s = (i.size > 1024)?((i.size > 1024 * 1024)? (i.size / 1024 /1024).toFixed(2) + ' MB' : (i.size / 1024).toFixed(2) + ' KB') : i.size + ' B'   ;
                        
                        return'<li><a href="./downloads/'+encodeURI(i.name)+'"><span>'+i.name+'</span><span>'+t+'</span><span>'+s+'</span></a><a  class="download_link" href="./downloads/'+encodeURI(i.name)+'" download="'+encodeURI(i.name)+'">DOWNLOAD</a></li>'}).join('');
                 }).catch(err => console.log('fetch'+err+err.data));

        })
	window.onload = () => {
 	 'use strict';

	  if ('serviceWorker' in navigator) {
	    navigator.serviceWorker.register('./worker.js');
        // Register a Service Worker.


navigator.serviceWorker.ready
.then(function(registration) {
  // Use the PushManager to get the user's subscription to the push service.
  return registration.pushManager.getSubscription()
  .then(async function(subscription) {
    // If a subscription was found, return it.
    if (subscription) {
      return subscription;
    }

    // Get the server's public key
    const response = await fetch('./vapidPublicKey');
    const vapidPublicKey = await response.text();
    // Chrome doesn't accept the base64-encoded (string) vapidPublicKey yet
    // urlBase64ToUint8Array() is defined in /tools.js
    const convertedVapidKey = vapidPublicKey;

    // Otherwise, subscribe the user (userVisibleOnly allows to specify that we don't plan to
    // send notifications that don't have a visible effect for the user).
    return registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: convertedVapidKey
    });
  });
}).then(function(subscription) {
  // Send the subscription details to the server using the Fetch API.
  fetch('./register', {
    method: 'post',
    headers: {
      'Content-type': 'application/json'
    },
    body: JSON.stringify({
      subscription: subscription
    }),
  });

    

});
 	 }
	}
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
      
        gtag('config', 'G-V95FG9MK9N');
      </script>
</html>